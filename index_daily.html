<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Форма</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
		
		<link rel="stylesheet" type="text/css" href="/Agents/css/style.css" />
		<!--[if lt IE 9]> 
			<script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--<script type="text/javascript" src="./js/jquery.js"></script>-->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	</head>
	<body>
	 <div class="dropdown">
		<button onclick="myFunction()" class="dropbtn">Меню</button>
		<div id="myDropdown" class="dropdown-content">
			<a href="/prod/index.html">По сотрудникам</a>
			
		</div>
	</div>
	 <script>
	
/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
	function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
	}

// Close the dropdown if the user clicks outside of it
	window.onclick = function(event) {
		if (!event.target.matches('.dropbtn')) {

			var dropdowns = document.getElementsByClassName("dropdown-content");
			var i;
			for (i = 0; i < dropdowns.length; i++) {
			var openDropdown = dropdowns[i];
				if (openDropdown.classList.contains('show')) {
					openDropdown.classList.remove('show');
				}
			}
		}
	
	}
	</script> 
		<h1>Работа агентов за сутки</h1>
		
		<form id="form" method="post" action="stats_by_day.php" >
			<p>День:</p>
			<div id="day"><label><p> 	
				<select name="day" id="day" class="day" >
				<option value="02">2</option>
				<option value="03">3</option>
				<option value="25">25</option>
				<option value="26">26</option>
				<option value="27">27</option>
				<option value="28">28</option>
				<option value="29">29</option>
				<option value="30">30</option>
				</select></p></label>
			
			</div>
		 	<p>Месяц:</p>
			<div id="month_fr"><label><p> 	
				<select name="month_from" id="mfr" class="date" >
				<option value="1">Январь</option>
				<option value="2">Февраль</option>
				<option value="3">Март</option>
				<option value="4">Апрель</option>
				<option value="5">Май</option>
				<option value="6">Июнь</option>
				<option value="7">Июль</option>
				<option value="8">Август</option>
				<option value="9">Сентябрь</option>
				<option value="10">Октябрь</option>
				<option value="11">Ноябрь</option>
				<option value="12">Декабрь</option>
				</select></p></label>
			
			</div>
			<p>Year: <select name="year_from" id="yfr" class="date" >
				<option value="2016">2016</option>
				</select>
			</p>
			<p><div id="errors"></div></p>	
			<p><input type="submit" name="send" class="send" value="ВВОД"></p>
		</form>
		
		<script>
		$('form').submit(function(event){
			var year_cond =($("#yto").val()<$("#yfr").val());
			var year_cond_eq =($("#yto").val()===$("#yfr").val());
			var month_cond =($("#mfr").val()>$("#mto").val());
			if (year_cond){
				  $( "#errors" ).text( "ОШИБКА: Год ОКОНЧАНИЯ не может быть раньше года НАЧАЛА! " ).show().fadeOut( 8000 );
					event.preventDefault();
				return false;
			}
			else if (month_cond & year_cond_eq){
				$( "#errors" ).text( "ОШИБКА: Месяц ОКОНЧАНИЯ не может быть раньше месяца НАЧАЛА!" ).show().fadeOut( 8000 );
					event.preventDefault();
				return false;
			}
			
			var res=$.post(
					$(this).attr("action"),
					$(this).serialize(),
					void(0)
				).html();
				
				return;
		});	
		
		</script>
	</body>
</html>